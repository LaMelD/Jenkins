# 3장 UNIX/Linux 기본 명령어와 개념

**기본 리눅스 명령어가 익숙한 독자는 4장으로 가서 쉘 스크립트 작성에 관련된 기본 문법을 숙달하는 것을 추천한다.**

### 3.1 입출력 재지정

|fd|fd 이름|용도|표준 장치|
|:---|:---|:---|:---|
|0|stdin(standard input)|명령어에 입력될 내용을 저장|키보드|
|1|stdout(standard output)|명령어에서 출력될 내용을 저장|화면|
|2|stderr(standard error)|명령어에서 출력될 에러 메시지를 저장|화면|

![std](../imgs/ch03/std-in-out-err.PNG)

![filestd](../imgs/ch03/filestd.PNG)

- 이렇게 키보드 같은 표준 입력 장치가 아닌 파일 등으로 재지정하는 것을 입력 재지정(input redirection)이라고 하고, 명령어의 실행 결과나 에러 메시지 같이 화면에 출력되는 것을 파일 등에 저장하는 것을 출력 재지정(output redirection)이라고 한다.
- 입출력 재지정
    - `<` : 입력 재지정
    - `>` : 출력 재지정
    - fd 번호를 받으시 붙여서 사용한다
    
    |형식|내용|
    |:---|:---|
    |명령어 fd 번호 < 파일|명령어에서 기본 지정된 파일이나 표준 입력 장치가 아닌 재지정된 파일에서 데이터를 입력받는다.|
    |명령어 fd 번호 > 파일|명령어에서 기본 지정된 파일이나 표준 출력 장치가 아닌 재지정된 파일에 데이터를 출력한다.|

    - 입출력 재지정을 사용할 때 fd 번호를 생략할 수 있다.

- 예시
    1. 입력
        
        ```
        명령어 < 파일
        명령어 0< 파일
        $ cat system
        Linux
        $ tr '[A-Z]' '[a-z]' < system
        linux
        ```

    2. 출력
        - `>` 이름이 같은 파일이 있다면 덮어쓰기
        - `>>` 이름이 같은 파일이 있다면 새로운 내용을 추가
        
        ```
        명령어 > 파일
        명령어 1> 파일
        명령어 >> 파일
        명령어 1>> 파일
        $ date > day-time
        $ cat day-time
        Sun Jul 19 13:14:15 UTC 2020
        $ date >> day-time
        $ cat day-time
        Sun Jul 19 13:14:15 UTC 2020
        Sun Jul 19 13:14:29 UTC 2020
        ```

        ```
        명령어 2> 파일
        명령어 2>> 파일
        ```

    3. 출력과 에러 메시지가 동일한 파일에 출력하도록 재지정할 수 있다.
        - 명령어의 중복을 막기 위해 이용할 수 있다.
        - `>&` : 기호 앞에 fd 번호 1은 생략이 가능하지만 기호 뒤에 fd 번호는 생략이 불가함을 기억해야 한다.

### 3.2 파이프 (Pipe)

- 앞의 명령어의 실행 결과가 뒤의 명령어에 입력되도록 입출력을 연결하는 연결하는 역할을 한다.
- 파이프의 역할은 출력 재지정과 유사하다.
    - 출력 재지정의 경우 하드디스크 같은 보조 기억 매체의 입출력 버퍼에 저장하고 재지정된 명령어에 전달하기 때문에 버퍼에 저장하고 처리하는데 시간이 걸린다.
    - 파이프의 경우, 여러 개의 명령어가 파이프로 실행될 때 이들 명령어가 거의 동식에 실행되면서 입출력되는 데이터들이 파이프로 연결되어 처리되므로 상대적으로 처리 시간이 빠른 것이 특징이다.

![pipe](../imgs/ch03/pipe.PNG)

- 명령어 a의 실행 결과를 명령어 b로 넘겨주고 최종적으로 명령어c에 의해 처리된 결과를 확인할 수 있다.

- 예시
    ```
    $ ls -l /var/log | sort -rk 9
    -rw-rw-r--  1 root      utmp              9984 Jul 19 13:14 wtmp
    drwxr-x---  2 root      adm               4096 Jul 16 09:24 unattended-upgrades
    -rw-------  1 root      root             64064 Jul 16 09:30 tallylog
    -rw-r-----  1 syslog    adm             244407 Jul 19 13:24 syslog
    drwxr-xr-x  2 root      root              4096 Nov 23  2018 lxd
    -rw-rw-r--  1 root      utmp            292292 Jul 19 13:14 lastlog
    drwxr-xr-x  2 landscape landscape         4096 Jul 16 09:36 landscape
    -rw-r-----  1 syslog    adm             151620 Jul 19 12:34 kern.log
    drwxr-sr-x+ 3 root      systemd-journal   4096 Jul 16 09:30 journal
    drwxr-xr-x  3 root      root              4096 Jul 16 09:27 installer
    -rw-r--r--  1 root      root             32032 Jul 16 09:30 faillog
    -rw-r--r--  1 root      root            535179 Jul 16 09:27 dpkg.log
    drwxr-xr-x  2 root      root              4096 Jan 24 11:47 dist-upgrade
    -rw-r--r--  1 root      root             11103 Jul 19 12:35 cloud-init-output.log
    -rw-r--r--  1 syslog    adm             211836 Jul 19 12:35 cloud-init.log
    -rw-rw----  1 root      utmp               384 Jul 19 12:31 btmp
    -rw-r--r--  1 root      root             56751 Feb  3 18:22 bootstrap.log
    -rw-r-----  1 syslog    adm               7084 Jul 19 13:17 auth.log
    drwxr-xr-x  2 root      root              4096 Jul 16 09:27 apt
    -rw-r--r--  1 root      root             27163 Jul 16 09:27 alternatives.log
    ```

### 3.3 UNIX/Linux 시스템 관리를 위한 기본 명령어

- 3.3.1 at 명령어
- 3.3.2 chmod 명령어
- 3.3.3 chown 명령어
- 3.3.4 cmp 명령어
- 3.3.5 col 명령어
- 3.3.6 colcrt 명령어
- 3.3.7 cp 명령어
- 3.3.8 cut 명령어
- 3.3.9 date 명령어
- 3.3.10 df 명령어
- 3.3.11 diff 명령어
- 3.3.12 domainname 명령어
- 3.3.13 du 명령어
- 3.3.14 echo 명령어
- 3.3.15 find 명령어
- 3.3.16 free 명령어
- 3.3.17 ftp 명령어
- 3.3.18 ifconfig 명령어
- 3.3.19 grep 명령어
- 3.3.20 logger 명령어
- 3.3.21 lsof 명령어
- 3.3.22 netstat 명령어
- 3.3.23 nl 명령어
- 3.3.24 ntpdate 명령어
- 3.3.25 ping 명령어
- 3.3.26 pmap 명령어
- 3.3.27 pr 명령어
- 3.3.28 ps 명령어
- 3.3.29 pwd 명령어
- 3.3.30 route 명령어
- 3.3.31 script 명령어
- 3.3.32 sort 명령어
- 3.3.33 tail 명령어
- 3.3.34 tar 명령어
- 3.3.35 time 명령어
- 3.3.36 touch 명령어
- 3.3.37 tr 명령어
- 3.3.38 traceroute 명령어
- 3.3.39 uptime 명령어
- 3.3.40 vmstat 명령어
- 3.3.41 w 명령어

### 3.4 스트림 편집기 sed

### 3.5 awk

- 3.5.1 awk의 필드 인식 구조
- 3.5.2 awk에서 활용 가능한 정규 표현식
- 3.5.3 awk의 조건문
- 3.5.4 BEGIN / END 표현식
- 3.5.5 파이프 라인

### 3.6 vi 편집기

- 3.6.1 vi 모드
- 3.6.2 vi 종료하고 파일 저장하기
- 3.6.3 커서 이동하기
- 3.6.4 수정 및 삭제
- 3.6.5 복사하기와 붙이기
- 3.6.6 환경 설정